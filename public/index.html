<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNO Card Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        

```
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    /* Screen Management */
    .screen {
        display: none;
    }

    .screen.active {
        display: block;
    }

    /* Main Menu Styles */
    .main-menu {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 30px;
        padding: 60px 80px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        text-align: center;
        max-width: 500px;
    }

    .main-menu h1 {
        font-size: 4em;
        color: #667eea;
        margin-bottom: 20px;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
    }

    .main-menu p {
        font-size: 1.2em;
        color: #666;
        margin-bottom: 40px;
    }

    .menu-button {
        display: block;
        width: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 20px 40px;
        font-size: 1.3em;
        border-radius: 15px;
        cursor: pointer;
        margin-bottom: 15px;
        transition: all 0.3s;
        box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
    }

    .menu-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.6);
    }

    .menu-button.settings {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
    }

    .menu-button.settings:hover {
        box-shadow: 0 10px 25px rgba(52, 152, 219, 0.6);
    }

    .menu-button.quit {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        box-shadow: 0 6px 15px rgba(231, 76, 60, 0.4);
    }

    .menu-button.quit:hover {
        box-shadow: 0 10px 25px rgba(231, 76, 60, 0.6);
    }

    /* Settings Menu Styles */
    .settings-menu {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 30px;
        padding: 50px 60px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        max-width: 600px;
    }

    .settings-menu h2 {
        font-size: 2.5em;
        color: #667eea;
        margin-bottom: 30px;
        text-align: center;
    }

    .setting-item {
        margin-bottom: 30px;
        background: rgba(102, 126, 234, 0.1);
        padding: 20px;
        border-radius: 15px;
    }

    .setting-item label {
        display: block;
        font-size: 1.3em;
        color: #333;
        margin-bottom: 15px;
        font-weight: bold;
    }

    .setting-item select {
        width: 100%;
        padding: 12px;
        font-size: 1.1em;
        border: 2px solid #667eea;
        border-radius: 10px;
        background: white;
        cursor: pointer;
    }

    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 80px;
        height: 40px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 40px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 32px;
        width: 32px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #667eea;
    }

    input:checked + .slider:before {
        transform: translateX(40px);
    }

    .settings-buttons {
        display: flex;
        gap: 15px;
        margin-top: 40px;
    }

    .settings-buttons button {
        flex: 1;
    }

    /* Game Container Styles */
    .game-container {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        max-width: 1200px;
        width: 100%;
    }

    .game-header {
        text-align: center;
        color: white;
        margin-bottom: 30px;
    }

    .game-header h1 {
        font-size: 3em;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin-bottom: 10px;
    }

    .game-info {
        display: flex;
        justify-content: space-around;
        color: white;
        margin-bottom: 20px;
        font-size: 1.2em;
    }

    .game-info div {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 20px;
        border-radius: 10px;
    }

    .play-area {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        margin: 40px 0;
        min-height: 180px;
    }

    .card {
        width: 120px;
        height: 180px;
        border-radius: 15px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
        position: relative;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        border: 4px solid white;
    }

    .card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
    }

    .card-inner {
        width: 80%;
        height: 80%;
        background: white;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2.5em;
        font-weight: bold;
    }

    .card.red { background-color: #e74c3c; }
    .card.blue { background-color: #3498db; }
    .card.green { background-color: #2ecc71; }
    .card.yellow { background-color: #f1c40f; }
    .card.wild { 
        background: linear-gradient(135deg, #e74c3c 0%, #3498db 33%, #2ecc71 66%, #f1c40f 100%);
    }

    .card-back {
        background: linear-gradient(135deg, #2c3e50, #34495e);
        cursor: pointer;
    }

    .card-back:hover {
        transform: scale(1.05);
    }

    .player-hand {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        min-height: 200px;
        margin-top: 30px;
    }

    .player-hand .card {
        width: 100px;
        height: 150px;
    }

    .player-hand .card-inner {
        font-size: 2em;
    }

    .card.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .card.disabled:hover {
        transform: none;
    }

    .color-picker {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        z-index: 1000;
    }

    .color-picker.active {
        display: block;
    }

    .color-picker h3 {
        margin-bottom: 20px;
        text-align: center;
    }

    .color-options {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    .color-option {
        width: 80px;
        height: 80px;
        border-radius: 10px;
        cursor: pointer;
        border: 4px solid transparent;
        transition: transform 0.2s;
    }

    .color-option:hover {
        transform: scale(1.1);
        border-color: #333;
    }

    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 999;
    }

    .overlay.active {
        display: block;
    }

    .message {
        text-align: center;
        color: white;
        font-size: 1.5em;
        margin: 20px 0;
        min-height: 40px;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }

    button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 1.1em;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.2s;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    button:hover {
        transform: scale(1.05);
    }

    button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .game-over {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        z-index: 1001;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .game-over.active {
        display: block;
    }

    .game-over h2 {
        font-size: 2.5em;
        margin-bottom: 20px;
        color: #667eea;
    }

    .computer-hand {
        text-align: center;
        color: white;
        font-size: 1.3em;
        margin-bottom: 20px;
    }

    .computer-cards {
        display: flex;
        justify-content: center;
        gap: -40px;
    }

    .computer-cards .card {
        width: 80px;
        height: 120px;
        margin: 0 -30px;
    }

    .uno-button {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: #e74c3c;
        color: white;
        border: none;
        padding: 20px 40px;
        font-size: 1.5em;
        font-weight: bold;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        transition: all 0.3s;
        display: none;
    }

    .uno-button.active {
        display: block;
    }

    .uno-button:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(231, 76, 60, 0.6);
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .uno-button.pulse {
        animation: pulse 0.5s ease-in-out infinite;
    }

    .pause-menu {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        z-index: 1001;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        min-width: 300px;
    }

    .pause-menu.active {
        display: block;
    }

    .pause-menu h2 {
        font-size: 2em;
        color: #667eea;
        margin-bottom: 30px;
    }

    .pause-menu button {
        width: 100%;
        margin-bottom: 15px;
    }
</style>
```

</head>
<body>
    <!-- Main Menu Screen -->
    <div id="mainMenuScreen" class="screen active">
        <div class="main-menu">
            <h1>üé¥ UNO üé¥</h1>
            <p>Classic Card Game</p>
            <button class="menu-button" onclick="startGame()">Play Game</button>
            <button class="menu-button settings" onclick="showSettings()">Settings</button>
            <button class="menu-button quit" onclick="quitGame()">Quit</button>
        </div>
    </div>

```
<!-- Settings Screen -->
<div id="settingsScreen" class="screen">
    <div class="settings-menu">
        <h2>‚öôÔ∏è Settings</h2>
        
        <div class="setting-item">
            <label>Difficulty Level</label>
            <select id="difficulty">
                <option value="easy">Easy</option>
                <option value="medium" selected>Medium</option>
                <option value="hard">Hard</option>
            </select>
        </div>

        <div class="setting-item">
            <label>Starting Cards</label>
            <select id="startingCards">
                <option value="5">5 Cards</option>
                <option value="7" selected>7 Cards (Classic)</option>
                <option value="10">10 Cards</option>
            </select>
        </div>

        <div class="setting-item">
            <label>
                Sound Effects
                <label class="toggle-switch" style="float: right;">
                    <input type="checkbox" id="soundToggle" checked>
                    <span class="slider"></span>
                </label>
            </label>
        </div>

        <div class="setting-item">
            <label>
                Auto UNO Call
                <label class="toggle-switch" style="float: right;">
                    <input type="checkbox" id="autoUno">
                    <span class="slider"></span>
                </label>
            </label>
        </div>

        <div class="settings-buttons">
            <button class="menu-button" onclick="saveSettings()">Save & Return</button>
            <button class="menu-button quit" onclick="cancelSettings()">Cancel</button>
        </div>
    </div>
</div>

<!-- Game Screen -->
<div id="gameScreen" class="screen">
    <div class="game-container">
        <div class="game-header">
            <h1>üé¥ UNO üé¥</h1>
        </div>

        <div class="game-info">
            <div>Current Player: <span id="currentPlayer">You</span></div>
            <div>Current Color: <span id="currentColor">-</span></div>
            <div>Cards in Deck: <span id="deckCount">108</span></div>
        </div>

        <div class="computer-hand">
            <div>Computer Hand (<span id="computerCardCount">7</span> cards)</div>
            <div class="computer-cards" id="computerCards"></div>
        </div>

        <div class="message" id="message">Game started! Your turn.</div>

        <div class="play-area">
            <div class="card card-back" id="drawPile" onclick="drawCard()">
                <div style="color: white; font-size: 3em;">üé¥</div>
            </div>
            <div id="discardPile"></div>
        </div>

        <div class="player-hand" id="playerHand"></div>

        <div class="controls">
            <button onclick="pauseGame()">Pause</button>
            <button onclick="startNewGame()">New Game</button>
        </div>
    </div>
</div>

<button class="uno-button" id="unoButton" onclick="callUno()">UNO!</button>

<div class="overlay" id="overlay"></div>

<div class="color-picker" id="colorPicker">
    <h3>Choose a Color:</h3>
    <div class="color-options">
        <div class="color-option red" onclick="chooseColor('red')"></div>
        <div class="color-option blue" onclick="chooseColor('blue')"></div>
        <div class="color-option green" onclick="chooseColor('green')"></div>
        <div class="color-option yellow" onclick="chooseColor('yellow')"></div>
    </div>
</div>

<div class="game-over" id="gameOver">
    <h2 id="winnerText">You Win!</h2>
    <p id="winnerMessage"></p>
    <button onclick="returnToMenu()" style="margin-top: 20px;">Main Menu</button>
    <button onclick="startNewGame()" style="margin-top: 10px;">Play Again</button>
</div>

<div class="pause-menu" id="pauseMenu">
    <h2>‚è∏Ô∏è Paused</h2>
    <button onclick="resumeGame()">Resume Game</button>
    <button onclick="returnToMenu()">Main Menu</button>
    <button class="menu-button quit" onclick="quitGame()">Quit</button>
</div>

<script>
    const COLORS = ['red', 'blue', 'green', 'yellow'];
    const NUMBERS = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
    const ACTIONS = ['Skip', 'Reverse', '+2'];
    const WILDS = ['Wild', 'Wild+4'];

    let deck = [];
    let playerHand = [];
    let computerHand = [];
    let discardPile = [];
    let currentColor = null;
    let currentValue = null;
    let currentPlayer = 'player';
    let direction = 1;
    let playerCalledUno = false;
    let computerCalledUno = false;
    let pendingWildCard = null;
    
    // Settings
    let settings = {
        difficulty: 'medium',
        startingCards: 7,
        soundEffects: true,
        autoUno: false
    };

    // Screen Management
    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
    }

    function showSettings() {
        document.getElementById('difficulty').value = settings.difficulty;
        document.getElementById('startingCards').value = settings.startingCards;
        document.getElementById('soundToggle').checked = settings.soundEffects;
        document.getElementById('autoUno').checked = settings.autoUno;
        
        showScreen('settingsScreen');
    }

    function saveSettings() {
        settings.difficulty = document.getElementById('difficulty').value;
        settings.startingCards = parseInt(document.getElementById('startingCards').value);
        settings.soundEffects = document.getElementById('soundToggle').checked;
        settings.autoUno = document.getElementById('autoUno').checked;
        
        showScreen('mainMenuScreen');
    }

    function cancelSettings() {
        showScreen('mainMenuScreen');
    }

    function startGame() {
        showScreen('gameScreen');
        startNewGame();
    }

    function pauseGame() {
        document.getElementById('overlay').classList.add('active');
        document.getElementById('pauseMenu').classList.add('active');
    }

    function resumeGame() {
        document.getElementById('overlay').classList.remove('active');
        document.getElementById('pauseMenu').classList.remove('active');
    }

    function returnToMenu() {
        document.getElementById('overlay').classList.remove('active');
        document.getElementById('pauseMenu').classList.remove('active');
        document.getElementById('gameOver').classList.remove('active');
        showScreen('mainMenuScreen');
    }

    function quitGame() {
        if (confirm('Are you sure you want to quit?')) {
            window.close();
            setTimeout(() => {
                alert('Please close this tab/window to quit the game.');
            }, 100);
        }
    }

    function createDeck() {
        deck = [];
        
        COLORS.forEach(color => {
            deck.push({ color, value: '0', type: 'number' });
            
            for (let i = 0; i < 2; i++) {
                NUMBERS.slice(1).forEach(num => {
                    deck.push({ color, value: num, type: 'number' });
                });
                
                ACTIONS.forEach(action => {
                    deck.push({ color, value: action, type: 'action' });
                });
            }
        });
        
        for (let i = 0; i < 4; i++) {
            deck.push({ color: 'wild', value: 'Wild', type: 'wild' });
            deck.push({ color: 'wild', value: 'Wild+4', type: 'wild' });
        }
        
        shuffleDeck();
    }

    function shuffleDeck() {
        for (let i = deck.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [deck[i], deck[j]] = [deck[j], deck[i]];
        }
    }

    function dealCards() {
        playerHand = [];
        computerHand = [];
        
        const cardsToDeal = settings.startingCards;
        
        for (let i = 0; i < cardsToDeal; i++) {
            playerHand.push(deck.pop());
            computerHand.push(deck.pop());
        }
        
        let startCard;
        do {
            startCard = deck.pop();
        } while (startCard.type !== 'number');
        
        discardPile.push(startCard);
        currentColor = startCard.color;
        currentValue = startCard.value;
    }

    function renderCard(card, clickHandler = null, isDisabled = false) {
        const cardDiv = document.createElement('div');
        cardDiv.className = `card ${card.color}`;
        if (isDisabled) cardDiv.classList.add('disabled');
        
        const cardInner = document.createElement('div');
        cardInner.className = 'card-inner';
        cardInner.style.color = card.color === 'yellow' ? '#000' : card.color;
        
        if (card.color === 'wild') {
            cardInner.style.color = '#333';
        }
        
        cardInner.textContent = card.value;
        cardDiv.appendChild(cardInner);
        
        if (clickHandler && !isDisabled) {
            cardDiv.onclick = clickHandler;
        }
        
        return cardDiv;
    }

    function renderPlayerHand() {
        const handDiv = document.getElementById('playerHand');
        handDiv.innerHTML = '';
        
        playerHand.forEach((card, index) => {
            const isPlayable = canPlayCard(card);
            const cardDiv = renderCard(card, () => playCard(index), !isPlayable || currentPlayer !== 'player');
            handDiv.appendChild(cardDiv);
        });

        const unoButton = document.getElementById('unoButton');
        if (playerHand.length === 2 && currentPlayer === 'player' && !settings.autoUno) {
            unoButton.classList.add('active', 'pulse');
        } else {
            unoButton.classList.remove('active', 'pulse');
        }
        
        if (settings.autoUno && playerHand.length === 2) {
            playerCalledUno = true;
        }
    }

    function renderComputerHand() {
        const computerCardsDiv = document.getElementById('computerCards');
        computerCardsDiv.innerHTML = '';
        
        for (let i = 0; i < Math.min(computerHand.length, 10); i++) {
            const cardBack = document.createElement('div');
            cardBack.className = 'card card-back';
            cardBack.innerHTML = '<div style="color: white; font-size: 2em;">üé¥</div>';
            computerCardsDiv.appendChild(cardBack);
        }
        
        document.getElementById('computerCardCount').textContent = computerHand.length;
    }

    function renderDiscardPile() {
        const discardDiv = document.getElementById('discardPile');
        discardDiv.innerHTML = '';
        
        if (discardPile.length > 0) {
            const topCard = discardPile[discardPile.length - 1];
            const cardDiv = renderCard(topCard);
            discardDiv.appendChild(cardDiv);
        }
    }

    function updateGameInfo() {
        document.getElementById('currentPlayer').textContent = currentPlayer === 'player' ? 'You' : 'Computer';
        document.getElementById('currentColor').textContent = currentColor || '-';
        document.getElementById('deckCount').textContent = deck.length;
    }

    function canPlayCard(card) {
        if (card.type === 'wild') return true;
        return card.color === currentColor || card.value === currentValue;
    }

    function playCard(index) {
        if (currentPlayer !== 'player') return;
        
        const card = playerHand[index];
        if (!canPlayCard(card)) {
            showMessage("Can't play that card!");
            return;
        }

        playerCalledUno = false;
        
        playerHand.splice(index, 1);
        discardPile.push(card);
        
        if (card.type === 'wild') {
            pendingWildCard = card;
            showColorPicker();
        } else {
            currentColor = card.color;
            currentValue = card.value;
            handleCardEffect(card);
        }
        
        renderPlayerHand();
        renderDiscardPile();
        updateGameInfo();
        
        if (playerHand.length === 0) {
            endGame('player');
        }
    }

    function handleCardEffect(card) {
        switch(card.value) {
            case 'Skip':
                showMessage('Computer skipped!');
                setTimeout(() => checkTurnEnd(), 1000);
                break;
                
            case 'Reverse':
                direction *= -1;
                showMessage('Direction reversed!');
                setTimeout(() => checkTurnEnd(), 1000);
                break;
                
            case '+2':
                for (let i = 0; i < 2; i++) {
                    if (deck.length > 0) computerHand.push(deck.pop());
                }
                showMessage('Computer draws 2 cards!');
                renderComputerHand();
                setTimeout(() => checkTurnEnd(), 1500);
                break;
                
            case 'Wild+4':
                for (let i = 0; i < 4; i++) {
                    if (deck.length > 0) computerHand.push(deck.pop());
                }
                showMessage('Computer draws 4 cards!');
                renderComputerHand();
                setTimeout(() => checkTurnEnd(), 1500);
                break;
                
            default:
                checkTurnEnd();
        }
    }

    function checkTurnEnd() {
        if (playerHand.length === 1 && !playerCalledUno && currentPlayer === 'player' && !settings.autoUno) {
            showMessage('You forgot to call UNO! Draw 2 cards!');
            drawCardsPenalty('player', 2);
            renderPlayerHand();
            setTimeout(() => switchTurn(), 1500);
        } else {
            switchTurn();
        }
    }

    function switchTurn() {
        currentPlayer = currentPlayer === 'player' ? 'computer' : 'player';
        updateGameInfo();
        
        if (currentPlayer === 'computer') {
            showMessage("Computer's turn...");
            setTimeout(computerPlay, 1500);
        } else {
            showMessage("Your turn!");
        }
    }

    function computerPlay() {
        let playableCards = computerHand.filter(card => canPlayCard(card));
        
        if (settings.difficulty === 'easy') {
            if (playableCards.length > 0) {
                playableCards = [playableCards[Math.floor(Math.random() * playableCards.length)]];
            }
        } else if (settings.difficulty === 'hard') {
            playableCards.sort((a, b) => {
                const aScore = (a.type === 'wild' ? 3 : 0) + (a.value === 'Wild+4' ? 2 : 0) + (a.type === 'action' ? 1 : 0);
                const bScore = (b.type === 'wild' ? 3 : 0) + (b.value === 'Wild+4' ? 2 : 0) + (b.type === 'action' ? 1 : 0);
                return bScore - aScore;
            });
        } else {
            playableCards.sort((a, b) => {
                if (a.type === 'wild') return -1;
                if (b.type === 'wild') return 1;
                if (a.type === 'action') return -1;
                if (b.type === 'action') return 1;
                return 0;
            });
        }
        
        if (computerHand.length === 2) {
            computerCalledUno = true;
            showMessage('Computer says UNO!');
            setTimeout(() => computerPlayContinue(playableCards), 1000);
        } else {
            computerCalledUno = false;
            computerPlayContinue(playableCards);
        }
    }

    function computerPlayContinue(playableCards) {
        if (playableCards.length > 0) {
            const cardToPlay = playableCards[0];
            const index = computerHand.indexOf(cardToPlay);
            computerHand.splice(index, 1);
            discardPile.push(cardToPlay);
            
            if (cardToPlay.type === 'wild') {
                const colorCounts = { red: 0, blue: 0, green: 0, yellow: 0 };
                computerHand.forEach(c => {
                    if (c.color !== 'wild') colorCounts[c.color]++;
                });
                currentColor = Object.keys(colorCounts).reduce((a, b) => 
                    colorCounts[a] > colorCounts[b] ? a : b
                );
                currentValue = cardToPlay.value;
                showMessage(`Computer played ${cardToPlay.value} and chose ${currentColor}!`);
                
                renderComputerHand();
                renderDiscardPile();
                updateGameInfo();
                
                if (computerHand.length === 0) {
                    endGame('computer');
                    return;
                }
                
                setTimeout(() => handleComputerCardEffect(cardToPlay), 1500);
            } else {
                currentColor = cardToPlay.color;
                currentValue = cardToPlay.value;
                showMessage(`Computer played ${cardToPlay.value} ${cardToPlay.color}!`);
                
                renderComputerHand();
                renderDiscardPile();
                updateGameInfo();
                
                if (computerHand.length === 0) {
                    endGame('computer');
                    return;
                }
                
                setTimeout(() => handleComputerCardEffect(cardToPlay), 1500);
            }
        } else {
            if (deck.length > 0) {
                computerHand.push(deck.pop());
                showMessage('Computer drew a card!');
                renderComputerHand();
                updateGameInfo();
            }
            
            setTimeout(() => {
                if (computerHand.length === 1 && !computerCalledUno) {
                    showMessage('Computer forgot to call UNO! Draws 2 cards!');
                    drawCardsPenalty('computer', 2);
                    renderComputerHand();
                }
                switchTurn();
            }, 1500);
        }
    }

    function handleComputerCardEffect(card) {
        switch(card.value) {
            case 'Skip':
                showMessage('You are skipped!');
                setTimeout(() => switchTurn(), 1000);
                break;
                
            case 'Reverse':
                direction *= -1;
                showMessage('Direction reversed!');
                setTimeout(() => switchTurn(), 1000);
                break;
                
            case '+2':
                for (let i = 0; i < 2; i++) {
                    if (deck.length > 0) playerHand.push(deck.pop());
                }
                showMessage('You draw 2 cards!');
                renderPlayerHand();
                setTimeout(() => switchTurn(), 1500);
                break;
                
            case 'Wild+4':
                for (let i = 0; i < 4; i++) {
                    if (deck.length > 0) playerHand.push(deck.pop());
                }
                showMessage('You draw 4 cards!');
                renderPlayerHand();
                setTimeout(() => switchTurn(), 1500);
                break;
                
            default:
                switchTurn();
        }
    }

    function drawCard() {
        if (currentPlayer !== 'player') return;
        
        if (deck.length > 0) {
            const drawnCard = deck.pop();
            playerHand.push(drawnCard);
            showMessage('You drew a card!');
            renderPlayerHand();
            updateGameInfo();
            
            setTimeout(() => switchTurn(), 1000);
        } else {
            showMessage('No cards left in deck!');
        }
    }

    function drawCardsPenalty(player, count) {
        for (let i = 0; i < count; i++) {
            if (deck.length > 0) {
                if (player === 'player') {
                    playerHand.push(deck.pop());
                } else {
                    computerHand.push(deck.pop());
                }
            }
        }
        updateGameInfo();
    }

    function showColorPicker() {
        document.getElementById('overlay').classList.add('active');
        document.getElementById('colorPicker').classList.add('active');
    }

    function chooseColor(color) {
        currentColor = color;
        currentValue = pendingWildCard.value;
        
        document.getElementById('overlay').classList.remove('active');
        document.getElementById('colorPicker').classList.remove('active');
        
        showMessage(`You chose ${color}!`);
        updateGameInfo();
        
        setTimeout(() => handleCardEffect(pendingWildCard), 1000);
        pendingWildCard = null;
    }

    function callUno() {
        if (playerHand.length === 2 || playerHand.length === 1) {
            playerCalledUno = true;
            showMessage('UNO!');
            document.getElementById('unoButton').classList.remove('pulse');
        }
    }

    function showMessage(msg) {
        document.getElementById('message').textContent = msg;
    }

    function endGame(winner) {
        const gameOverDiv = document.getElementById('gameOver');
        const overlay = document.getElementById('overlay');
        
        if (winner === 'player') {
            document.getElementById('winnerText').textContent = 'üéâ You Win! üéâ';
            document.getElementById('winnerMessage').textContent = 'Congratulations! You beat the computer!';
        } else {
            document.getElementById('winnerText').textContent = 'üíª Computer Wins! üíª';
            document.getElementById('winnerMessage').textContent = 'Better luck next time!';
        }
        
        overlay.classList.add('active');
        gameOverDiv.classList.add('active');
    }

    function startNewGame() {
        document.getElementById('gameOver').classList.remove('active');
        document.getElementById('overlay').classList.remove('active');
        
        currentPlayer = 'player';
        direction = 1;
        playerCalledUno = false;
        computerCalledUno = false;
        pendingWildCard = null;
        
        createDeck();
        dealCards();
        
        renderPlayerHand();
        renderComputerHand();
        renderDiscardPile();
        updateGameInfo();
        showMessage('New game started! Your turn.');
    }
</script>
```

</body>
</html>
